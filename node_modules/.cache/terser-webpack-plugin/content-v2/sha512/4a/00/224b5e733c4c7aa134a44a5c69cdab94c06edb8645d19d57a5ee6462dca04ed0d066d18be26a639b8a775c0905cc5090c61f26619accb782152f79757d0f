{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=332)}({332:function(e,t,n){\"use strict\";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.canvas=t,this.ctx=this.canvas.getContext(\"2d\"),this.ctx.lineWith=2,this.ctx.strokeStyle=\"#222222\",this.drawing=!1,this.mousePos={x:0,y:0},this.lastPos=this.mousePos}var t,n,a;return t=e,(n=[{key:\"play\",value:function(){var e=this;this.canvas.addEventListener(\"mousedown\",function(t){e.drawing=!0,e.lastPos=e.getMousePos(e.canvas,t)},!1),document.addEventListener(\"mouseup\",function(){e.drawing=!1},!1),this.canvas.addEventListener(\"mousemove\",function(t){e.mousePos=e.getMousePos(e.canvas,t)},!1),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(e){window.setTimeout(e,1e3/60)};var t=this;!function e(){requestAnimFrame(e),t.renderCanvas()}(),this.canvas.addEventListener(\"touchstart\",function(t){var n,i,a;e.mousePos=(n=e.canvas,i=t,a=n.getBoundingClientRect(),{x:i.touches[0].clientX-a.left,y:i.touches[0].clientY-a.top});var o=t.touches[0],s=new MouseEvent(\"mousedown\",{clientX:o.clientX,clientY:o.clientY});e.canvas.dispatchEvent(s)},!1),this.canvas.addEventListener(\"touchend\",function(){var t=new MouseEvent(\"mouseup\",{});e.canvas.dispatchEvent(t)},!1),this.canvas.addEventListener(\"touchmove\",function(t){var n=t.touches[0],i=new MouseEvent(\"mousemove\",{clientX:n.clientX,clientY:n.clientY});e.canvas.dispatchEvent(i)},!1)}},{key:\"getMousePos\",value:function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}},{key:\"renderCanvas\",value:function(){!0===this.drawing&&(this.ctx.moveTo(this.lastPos.x,this.lastPos.y),this.ctx.lineTo(this.mousePos.x,this.mousePos.y),this.ctx.stroke(),this.lastPos=this.mousePos)}},{key:\"clearCanvas\",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width=this.canvas.width}},{key:\"saveSignature\",value:function(){return this.canvas.toDataURL()}}])&&i(t.prototype,n),a&&i(t,a),e}();function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.minute=t,this.seconde=n}var t,n,i;return t=e,(n=[{key:\"startTimer\",value:function(e){var t=this,n=setInterval(function(){t.seconde=t.seconde-1,-1==t.seconde&&(t.seconde=59,t.minute=t.minute-1),t.minute<0?(window.clearInterval(n),e.innerHTML=\"La réservation n'est plus disponnible.\"):e.innerHTML=\"La réservation expire dans \"+t.minute+\" minute(s) et \"+t.seconde+\" seconde(s).\"},1e3)}}])&&o(t.prototype,n),i&&o(t,i),e}();function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t,n,i,a,o,s,r,l,u,c,d,m,v,y,h,f,p,g,b){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.reservationButton=t,this.stationNameId=n,this.stationAddressId=i,this.stationStatusId=a,this.velovNumberId=o,this.infoStationId=s,this.errorInfoStationId=r,this.reservationId=l,this.deleteId=u,this.sendId=c,this.reservationFirstNameId=d,this.reservationNameId=m,this.errorReservationId=v,this.signatureId=y,this.reservationFormId=h,this.confirmationMessageId=f,this.clientSignature=!1,this.messageReservationId=p,this.messageReservationTimerId=g,this.reservationBoxId=b,this.timerStatus=null,this.signatureObject}var t,n,i;return t=e,(n=[{key:\"play\",value:function(){var e=this;this.reservationButton.addEventListener(\"click\",function(){\"\"==e.stationNameId.textContent&&\"\"==e.stationAddressId.textContent&&\"\"==e.stationStatusId.textContent&&\"\"==e.velovNumberId.textContent?e.errorInfoStationId.innerHTML=\"Aucune station sélectionné.\":\"0\"==e.velovNumberId.textContent||\"Ouverte\"!==e.stationStatusId.textContent?e.errorInfoStationId.innerHTML=\"Aucun Vélo'V disponnible, veuillez sélectionné une autre station.\":(\"\"!==e.errorInfoStationId.innerHTML&&(e.errorInfoStationId.innerHTML=\"\"),e.signatureObject=new a(e.signatureId),e.signatureObject.play(),e.displayDivReservationForm())}),this.signatureId.addEventListener(\"mousedown\",function(){e.clientSignature=!0}),this.signatureId.addEventListener(\"touchstart\",function(){e.clientSignature=!0}),this.deleteId.addEventListener(\"click\",function(){e.signatureObject.clearCanvas(),e.clientSignature=!1}),this.sendId.addEventListener(\"click\",function(){\"\"!==e.reservationFirstNameId.value&&\"\"!==e.reservationNameId.value?1==e.clientSignature?(e.saveReservation(),e.reservationFormId.style.display=\"none\",e.confirmationMessageId.innerHTML=\"Votre réservation à bien était prise en compte.\",e.getReservation(),e.displayMessageReservation()):e.errorReservationId.innerHTML=\"Signature invalide.\":e.errorReservationId.innerHTML=\"Nom ou prénom invalide.\"})}},{key:\"displayDivStationInfos\",value:function(){this.reservationId.style.display=\"none\",this.infoStationId.style.display=\"block\"}},{key:\"displayDivReservationForm\",value:function(){this.infoStationId.style.display=\"none\",this.reservationId.style.display=\"block\"}},{key:\"saveReservation\",value:function(){var e={name:this.reservationNameId.value.charAt(0).toUpperCase()+this.reservationNameId.value.substring(1).toLowerCase(),firstName:this.reservationFirstNameId.value.charAt(0).toUpperCase()+this.reservationFirstNameId.value.substring(1).toLowerCase(),stationName:this.stationNameId.textContent,stationAdress:this.stationAddressId.textContent,signature:this.signatureObject.saveSignature()},t=JSON.stringify(e);sessionStorage.setItem(\"reservation\",t)}},{key:\"getReservation\",value:function(){var e=sessionStorage.getItem(\"reservation\");this.reservationObject=JSON.parse(e)}},{key:\"displayMessageReservation\",value:function(){this.messageReservationId.innerHTML=\"Vous venez de passer une réservation au nom de \"+this.reservationObject.name+\" \"+this.reservationObject.firstName+\", localisé à la station \"+this.reservationObject.stationName+\" prêt de \"+this.reservationObject.stationAdress+\".\";var e=document.createElement(\"p\");e.id=\"reservation-box-timer\",this.reservationBoxId.appendChild(e);var t=new s(20,0);this.timerStatus=!0,t.startTimer(e,this.timerStatus);var n=document.createElement(\"img\");n.id=\"img-signature\",n.alt=\"Signature\",n.src=this.reservationObject.signature,this.reservationBoxId.appendChild(n)}}])&&r(t.prototype,n),i&&r(t,i),e}();var u=function e(t,n,i,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.name=t.name,this.nameId=n,this.address=t.address,this.addressId=i,this.status=t.status,this.statusId=a,this.velovNumber=t.available_bikes,this.velovNumberId=o,this.position=t.position};function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(t,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.id=t,this.location={lat:n,lng:i},this.map=!1,this.zoomMap=a,this.marker=[],this.response=!1,this.mapStyle=[{elementType:\"geometry\",stylers:[{color:\"#ffffff\"}]},{elementType:\"labels.icon\",stylers:[{visibility:\"off\"}]},{elementType:\"labels.text.fill\",stylers:[{color:\"#616161\"}]},{elementType:\"labels.text.stroke\",stylers:[{color:\"#f5f5f5\"}]},{featureType:\"administrative.country\",elementType:\"geometry.fill\",stylers:[{color:\"#ff0000\"}]},{featureType:\"administrative.land_parcel\",elementType:\"labels.text.fill\",stylers:[{color:\"#bdbdbd\"}]},{featureType:\"landscape\",stylers:[{color:\"#e9e9e9\"}]},{featureType:\"landscape.man_made\",stylers:[{color:\"#f0f0f0\"}]},{featureType:\"poi\",elementType:\"geometry\",stylers:[{color:\"#eeeeee\"}]},{featureType:\"poi\",elementType:\"labels.text.fill\",stylers:[{color:\"#757575\"}]},{featureType:\"poi.park\",elementType:\"geometry\",stylers:[{color:\"#e5e5e5\"}]},{featureType:\"poi.park\",elementType:\"labels.text.fill\",stylers:[{color:\"#9e9e9e\"}]},{featureType:\"road\",elementType:\"geometry\",stylers:[{color:\"#ffffff\"}]},{featureType:\"road.arterial\",elementType:\"labels.text.fill\",stylers:[{color:\"#757575\"}]},{featureType:\"road.highway\",elementType:\"geometry\",stylers:[{color:\"#dadada\"}]},{featureType:\"road.highway\",elementType:\"labels.text.fill\",stylers:[{color:\"#616161\"}]},{featureType:\"road.local\",elementType:\"labels.text.fill\",stylers:[{color:\"#9e9e9e\"}]},{featureType:\"transit.line\",elementType:\"geometry\",stylers:[{color:\"#e5e5e5\"}]},{featureType:\"transit.station\",elementType:\"geometry\",stylers:[{color:\"#eeeeee\"}]},{featureType:\"water\",stylers:[{color:\"#c2e9da\"}]},{featureType:\"water\",elementType:\"geometry\",stylers:[{color:\"#8db8c5\"}]},{featureType:\"water\",elementType:\"labels.text.fill\",stylers:[{color:\"#9e9e9e\"}]}]}var t,n,i;return t=e,(n=[{key:\"play\",value:function(){this.initMap(),this.getMarker()}},{key:\"initMap\",value:function(){this.map=new google.maps.Map(this.id,{zoom:this.zoomMap,center:this.location,styles:this.mapStyle,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1})}},{key:\"getMarker\",value:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){var t=this;this.readyState==XMLHttpRequest.DONE&&200==this.status&&function(){e.response=JSON.parse(t.responseText);var n=new l(document.getElementById(\"reservation-button\"),document.getElementById(\"station-name\"),document.getElementById(\"station-address\"),document.getElementById(\"station-status\"),document.getElementById(\"velov-number\"),document.getElementById(\"map-info-station\"),document.getElementById(\"error-info-station\"),document.getElementById(\"map-reservation\"),document.getElementById(\"delete\"),document.getElementById(\"send\"),document.getElementById(\"reservation-firstName\"),document.getElementById(\"reservation-name\"),document.getElementById(\"error-reservation\"),document.getElementById(\"signature\"),document.getElementById(\"form-reservation\"),document.getElementById(\"confirmation-message\"),document.getElementById(\"reservation-box-text\"),document.getElementById(\"reservation-box-timer\"),document.getElementById(\"reservation-box\"));n.play();for(var i=function(t){var i=new u(e.response[t],document.getElementById(\"station-name\"),document.getElementById(\"station-address\"),document.getElementById(\"station-status\"),document.getElementById(\"velov-number\"));e.marker[t]=new google.maps.Marker({position:i.position,map:e.map,icon:{url:\"images/station.png\"}}),e.marker[t].addListener(\"click\",function(){\"\"!==n.errorReservationId.innerHTML&&(n.errorReservationId.innerHTML=\"\"),n.displayDivStationInfos(),e.displayInfoStation(i)})},a=0;a<e.response.length;a++)i(a)}()},t.open(\"GET\",\"https://api.jcdecaux.com/vls/v1/stations?contract=lyon&apiKey=43f89aec196d8dc961aef4bfbde0b6a681dff5df\"),t.send()}},{key:\"displayInfoStation\",value:function(e){e.nameId.innerHTML=e.name.toLowerCase(),e.addressId.innerHTML=e.address.charAt(0).toUpperCase()+e.address.substring(1).toLowerCase(),\"OPEN\"==e.status?e.statusId.innerHTML=\"Ouverte\":\"CLOSED\"==e.status?e.statusId.innerHTML=\"Fermée\":e.statusId.innerHTML=e.status,e.velovNumberId.innerHTML=e.velovNumber}}])&&c(t.prototype,n),i&&c(t,i),e}();function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.logo=t,this.pageLoader=n}var t,n,i;return t=e,(n=[{key:\"play\",value:function(){var e=this;window.setTimeout(function(){e.pageLoader.classList.add(\"desactive-loader\")},300)}}])&&m(t.prototype,n),i&&m(t,i),e}();function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.text=t}var t,n,i;return t=e,(n=[{key:\"animation\",value:function(){this.text.style.opacity=1,this.text.style.transition=\"opacity 6s\"}}])&&y(t.prototype,n),i&&y(t,i),e}();function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p=function(){function e(t,n,i,a,o,s,r,l,u){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.id=t,this.leftButton=n,this.rightButton=i,this.stopButton=a,this.stopButtonPlay=o,this.stopButtonPause=s,this.valueButtonActive=r,this.valueButtonDesactive=l,this.arrowLeft=!1,this.arrowRight=!1,this.time=u,this.image=1,this.autoPlay=window.setInterval(function(){c.manualPlay,c.image<4?c.next():4==c.image&&c.goFirstImage()},this.time)}var t,n,i;return t=e,(n=[{key:\"init\",value:function(){this.manualPlay(this.leftButton),this.manualPlay(this.rightButton),this.manualPlay(this.stopButton)}},{key:\"changeImage\",value:function(){window.screen.width>900?(this.id.style.background=\"url(images/image-\"+this.image+\".jpg) no-repeat center center\",this.id.style.backgroundSize=\"100%\",console.log(\"yolo\")):window.screen.width<=900&&(this.id.style.background=\"url(images/image-\"+this.image+\"-mobile.jpg) no-repeat center center\",this.id.style.backgroundSize=\"100%\")}},{key:\"previous\",value:function(){this.image=this.image-1,this.changeImage()}},{key:\"next\",value:function(){this.image=this.image+1,this.changeImage()}},{key:\"stop\",value:function(){clearInterval(this.autoPlay),this.autoPlay=null}},{key:\"goFirstImage\",value:function(){this.image=1,this.changeImage()}},{key:\"restart\",value:function(){var e=this;this.autoPlay=window.setInterval(function(){e.manualPlay,e.image<4?e.next():e.goFirstImage()},this.time)}},{key:\"displayStopButton\",value:function(){this.stopButton.addEventListener(\"mouseover\",function(){document.getElementById(\"slideshow-pausePlayButton\").classList.replace(\"mouseOut\",\"mouseOn\")}),this.stopButton.addEventListener(\"mouseout\",function(){document.getElementById(\"slideshow-pausePlayButton\").classList.replace(\"mouseOn\",\"mouseOut\")})}},{key:\"changeHeightSlidershow\",value:function(){var e=this;window.setInterval(function(){window.screen.width>900?e.id.style.height=.33*e.id.offsetWidth+\"px\":window.screen.width<=900&&(e.id.screen.height=.78*e.id.offsetWidth+\"px\")},100)}},{key:\"manualPlay\",value:function(e){var t=this;this.changeHeightSlidershow(),e.addEventListener(\"click\",function(){e==t.leftButton?t.image>1&&(null!==t.autoPlay?(t.stop(),t.image=t.image-1,t.changeImage(),t.restart()):t.previous()):e==t.rightButton?t.image<4&&(null!==t.autoPlay?(t.stop(),t.next(),t.restart()):t.next()):e==t.stopButton&&(null!==t.autoPlay?(t.stop(),t.stopButtonPause.classList.replace(t.valueButtonActive,t.valueButtonDesactive),t.stopButtonPlay.classList.replace(t.valueButtonDesactive,t.valueButtonActive)):(t.restart(),t.stopButtonPause.classList.replace(t.valueButtonDesactive,t.valueButtonActive),t.stopButtonPlay.classList.replace(t.valueButtonActive,t.valueButtonDesactive)))}),document.addEventListener(\"keydown\",function(e){37===e.keyCode&&0==t.arrowLeft?(t.arrowLeft=!0,t.image>1&&(null!==t.autoPlay?(t.stop(),t.image=t.image-1,t.changeImage(),t.restart()):t.previous())):39===e.keyCode&&0==t.arrowRight&&(t.arrowRight=!0,t.image<4&&(null!==t.autoPlay?(t.stop(),t.next(),t.restart()):t.next())),document.addEventListener(\"keyup\",function(e){37!==e.keyCode&&39!==e.keyCode||(t.arrowLeft=!1,t.arrowRight=!1)})})}}])&&f(t.prototype,n),i&&f(t,i),e}();function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=function(){function e(t,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.buttonMobileMenu=t,this.backgroundMobileMenu=n,this.buttonsMobilesMenu=i,this.contentMobileMenu=a}var t,n,i;return t=e,(n=[{key:\"play\",value:function(){this.displayContentMobileMenu(this.buttonMobileMenu),this.displayContentMobileMenu(this.backgroundMobileMenu),this.displayContentMobileMenu(this.buttonsMobilesMenu),this.listenSizeWindow()}},{key:\"displayContentMobileMenu\",value:function(e){var t=this;e.addEventListener(\"click\",function(){t.contentMobileMenu.classList.contains(\"mobileMenu_disable\")?(t.contentMobileMenu.classList.replace(\"mobileMenu_disable\",\"mobileMenu_active\"),t.backgroundMobileMenu.classList.contains(\"mobileMenu-background_disable\")&&t.backgroundMobileMenu.classList.replace(\"mobileMenu-background_disable\",\"mobileMenu-background_active\")):t.contentMobileMenu.classList.contains(\"mobileMenu_active\")&&(t.contentMobileMenu.classList.replace(\"mobileMenu_active\",\"mobileMenu_disable\"),t.backgroundMobileMenu.classList.contains(\"mobileMenu-background_active\")&&t.backgroundMobileMenu.classList.replace(\"mobileMenu-background_active\",\"mobileMenu-background_disable\"))})}},{key:\"listenSizeWindow\",value:function(){var e=this;setInterval(function(){window.innerWidth>900&&e.contentMobileMenu.classList.contains(\"mobileMenu_active\")&&(e.contentMobileMenu.classList.replace(\"mobileMenu_active\",\"mobileMenu_disable\"),e.backgroundMobileMenu.classList.contains(\"mobileMenu-background_active\")&&e.backgroundMobileMenu.classList.replace(\"mobileMenu-background_active\",\"mobileMenu-background_disable\"))},150)}}])&&g(t.prototype,n),i&&g(t,i),e}();window.onload=function(){new d(document.getElementById(\"api-google\"),45.75,4.85,15).play();var e=new p(document.getElementById(\"info-slideshow\"),document.getElementById(\"slideshow-leftButton\"),document.getElementById(\"slideshow-rightButton\"),document.getElementById(\"slideshow-pausePlayButton\"),document.getElementById(\"play\"),document.getElementById(\"pause\"),\"pausePlay_active\",\"pausePlay_desactive\",5e3);e.init(),e.displayStopButton(),new b(document.getElementById(\"header-mobileImg\"),document.getElementById(\"mobileMenu-background\"),document.getElementById(\"mobileMenu-buttonGroupe\"),document.getElementById(\"mobileMenu\")).play(),new h(document.getElementById(\"big-one-title\")).animation(),new v(document.getElementById(\"logo-loader\"),document.getElementById(\"loader\")).play()}()}});","extractedComments":[]}