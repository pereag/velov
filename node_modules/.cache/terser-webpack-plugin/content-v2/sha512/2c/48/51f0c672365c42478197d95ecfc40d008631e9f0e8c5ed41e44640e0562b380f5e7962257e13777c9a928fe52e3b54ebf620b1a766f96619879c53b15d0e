{"code":"!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=0)}([function(e,t,s){\"use strict\";s.r(t);var i=class{constructor(e,t){this.logo=e,this.pageLoader=t}play(){this.pageLoader.classList.add(\"desactive-loader\")}};var n=class{constructor(e){this.canvas=e,this.ctx=this.canvas.getContext(\"2d\"),this.ctx.lineWith=2,this.ctx.strokeStyle=\"#222222\",this.drawing=!1,this.mousePos={x:0,y:0},this.lastPos=this.mousePos}play(){this.canvas.addEventListener(\"mousedown\",e=>{this.drawing=!0,this.lastPos=this.getMousePos(this.canvas,e)},!1),document.addEventListener(\"mouseup\",()=>{this.drawing=!1},!1),this.canvas.addEventListener(\"mousemove\",e=>{this.mousePos=this.getMousePos(this.canvas,e)},!1),window.requestAnimFrame=(()=>window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimaitonFrame||function(e){window.setTimeout(e,1e3/60)})();let e=this;!function t(){requestAnimFrame(t),e.renderCanvas()}(),this.canvas.addEventListener(\"touchstart\",e=>{this.mousePos=function(e,t){let s=e.getBoundingClientRect();return{x:t.touches[0].clientX-s.left,y:t.touches[0].clientY-s.top}}(this.canvas,e);let t=e.touches[0],s=new MouseEvent(\"mousedown\",{clientX:t.clientX,clientY:t.clientY});this.canvas.dispatchEvent(s)},!1),this.canvas.addEventListener(\"touchend\",()=>{let e=new MouseEvent(\"mouseup\",{});this.canvas.dispatchEvent(e)},!1),this.canvas.addEventListener(\"touchmove\",e=>{let t=e.touches[0],s=new MouseEvent(\"mousemove\",{clientX:t.clientX,clientY:t.clientY});this.canvas.dispatchEvent(s)},!1)}getMousePos(e,t){let s=e.getBoundingClientRect();return{x:t.clientX-s.left,y:t.clientY-s.top}}renderCanvas(){!0===this.drawing&&(this.ctx.moveTo(this.lastPos.x,this.lastPos.y),this.ctx.lineTo(this.mousePos.x,this.mousePos.y),this.ctx.stroke(),this.lastPos=this.mousePos)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.width=this.canvas.width}saveSignature(){return this.canvas.toDataURL()}};var a=class{constructor(e,t){this.minute=e,this.seconde=t}startTimer(e){let t=setInterval(()=>{this.seconde=this.seconde-1,-1==this.seconde&&(this.seconde=59,this.minute=this.minute-1),this.minute<0?(window.clearInterval(t),e.innerHTML=\"La réservation n'est plus disponnible.\"):e.innerHTML=\"La réservation expire dans \"+this.minute+\" minute(s) et \"+this.seconde+\" seconde(s).\"},1e3)}};var o=class{constructor(e,t,s,i,n,a,o,r,l,u,d,c,h,m,v,y,p,g,b){this.reservationButton=e,this.stationNameId=t,this.stationAddressId=s,this.stationStatusId=i,this.velovNumberId=n,this.infoStationId=a,this.errorInfoStationId=o,this.reservationId=r,this.deleteId=l,this.sendId=u,this.reservationFirstNameId=d,this.reservationNameId=c,this.errorReservationId=h,this.signatureId=m,this.reservationFormId=v,this.confirmationMessageId=y,this.clientSignature=!1,this.messageReservationId=p,this.messageReservationTimerId=g,this.reservationBoxId=b,this.timerStatus=null,this.signatureObject}play(){this.reservationButton.addEventListener(\"click\",()=>{\"\"==this.stationNameId.textContent&&\"\"==this.stationAddressId.textContent&&\"\"==this.stationStatusId.textContent&&\"\"==this.velovNumberId.textContent?this.errorInfoStationId.innerHTML=\"Aucune station sélectionné.\":\"0\"==this.velovNumberId.textContent||\"Ouverte\"!==this.stationStatusId.textContent?this.errorInfoStationId.innerHTML=\"Aucun Vélo'V disponnible, veuillez sélectionné une autre station.\":(\"\"!==this.errorInfoStationId.innerHTML&&(this.errorInfoStationId.innerHTML=\"\"),this.signatureObject=new n(this.signatureId),this.signatureObject.play(),this.displayDivReservationForm())}),this.signatureId.addEventListener(\"click\",()=>{this.clientSignature=!0}),this.deleteId.addEventListener(\"click\",()=>{this.signatureObject.clearCanvas(),this.clientSignature=!1}),this.sendId.addEventListener(\"click\",()=>{\"\"!==this.reservationFirstNameId.value&&\"\"!==this.reservationNameId.value?1==this.clientSignature?(this.saveReservation(),this.reservationFormId.style.display=\"none\",this.confirmationMessageId.innerHTML=\"Votre réservation à bien était prise en compte.\",this.getReservation(),this.displayMessageReservation()):this.errorReservationId.innerHTML=\"Signature invalide.\":this.errorReservationId.innerHTML=\"Nom ou prénom invalide.\"})}displayDivStationInfos(){this.reservationId.style.display=\"none\",this.infoStationId.style.display=\"block\"}displayDivReservationForm(){this.infoStationId.style.display=\"none\",this.reservationId.style.display=\"block\"}saveReservation(){let e={name:this.reservationNameId.value.charAt(0).toUpperCase()+this.reservationNameId.value.substring(1).toLowerCase(),firstName:this.reservationFirstNameId.value.charAt(0).toUpperCase()+this.reservationFirstNameId.value.substring(1).toLowerCase(),stationName:this.stationNameId.textContent,stationAdress:this.stationAddressId.textContent,signature:this.signatureObject.saveSignature()},t=JSON.stringify(e);sessionStorage.setItem(\"reservation\",t)}getReservation(){let e=sessionStorage.getItem(\"reservation\");this.reservationObject=JSON.parse(e)}displayMessageReservation(){this.messageReservationId.innerHTML=\"Vous venez de passer une réservation au nom de \"+this.reservationObject.name+\" \"+this.reservationObject.firstName+\", localisé à la station \"+this.reservationObject.stationName+\" prêt de \"+this.reservationObject.stationAdress+\".\";let e=document.createElement(\"p\");e.id=\"reservation-box-timer\",this.reservationBoxId.appendChild(e);let t=new a(20,0);this.timerStatus=!0,t.startTimer(e,this.timerStatus);let s=document.createElement(\"img\");s.id=\"img-signature\",s.alt=\"Signature\",s.src=this.reservationObject.signature,this.reservationBoxId.appendChild(s)}};var r=class{constructor(e,t,s,i,n){this.name=e.name,this.nameId=t,this.address=e.address,this.addressId=s,this.status=e.status,this.statusId=i,this.velovNumber=e.available_bikes,this.velovNumberId=n,this.position=e.position}};var l=class{constructor(e,t,s,i){this.id=e,this.location={lat:t,lng:s},this.map=!1,this.zoomMap=i,this.marker=[],this.response=!1,this.mapStyle=[{elementType:\"geometry\",stylers:[{color:\"#ffffff\"}]},{elementType:\"labels.icon\",stylers:[{visibility:\"off\"}]},{elementType:\"labels.text.fill\",stylers:[{color:\"#616161\"}]},{elementType:\"labels.text.stroke\",stylers:[{color:\"#f5f5f5\"}]},{featureType:\"administrative.country\",elementType:\"geometry.fill\",stylers:[{color:\"#ff0000\"}]},{featureType:\"administrative.land_parcel\",elementType:\"labels.text.fill\",stylers:[{color:\"#bdbdbd\"}]},{featureType:\"landscape\",stylers:[{color:\"#e9e9e9\"}]},{featureType:\"landscape.man_made\",stylers:[{color:\"#f0f0f0\"}]},{featureType:\"poi\",elementType:\"geometry\",stylers:[{color:\"#eeeeee\"}]},{featureType:\"poi\",elementType:\"labels.text.fill\",stylers:[{color:\"#757575\"}]},{featureType:\"poi.park\",elementType:\"geometry\",stylers:[{color:\"#e5e5e5\"}]},{featureType:\"poi.park\",elementType:\"labels.text.fill\",stylers:[{color:\"#9e9e9e\"}]},{featureType:\"road\",elementType:\"geometry\",stylers:[{color:\"#ffffff\"}]},{featureType:\"road.arterial\",elementType:\"labels.text.fill\",stylers:[{color:\"#757575\"}]},{featureType:\"road.highway\",elementType:\"geometry\",stylers:[{color:\"#dadada\"}]},{featureType:\"road.highway\",elementType:\"labels.text.fill\",stylers:[{color:\"#616161\"}]},{featureType:\"road.local\",elementType:\"labels.text.fill\",stylers:[{color:\"#9e9e9e\"}]},{featureType:\"transit.line\",elementType:\"geometry\",stylers:[{color:\"#e5e5e5\"}]},{featureType:\"transit.station\",elementType:\"geometry\",stylers:[{color:\"#eeeeee\"}]},{featureType:\"water\",stylers:[{color:\"#c2e9da\"}]},{featureType:\"water\",elementType:\"geometry\",stylers:[{color:\"#8db8c5\"}]},{featureType:\"water\",elementType:\"labels.text.fill\",stylers:[{color:\"#9e9e9e\"}]}]}play(){this.initMap(),this.getMarker()}initMap(){this.map=new google.maps.Map(this.id,{zoom:this.zoomMap,center:this.location,styles:this.mapStyle,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1})}getMarker(){let e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(this.readyState==XMLHttpRequest.DONE&&200==this.status){e.response=JSON.parse(this.responseText);let t=new o(document.getElementById(\"reservation-button\"),document.getElementById(\"station-name\"),document.getElementById(\"station-address\"),document.getElementById(\"station-status\"),document.getElementById(\"velov-number\"),document.getElementById(\"map-info-station\"),document.getElementById(\"error-info-station\"),document.getElementById(\"map-reservation\"),document.getElementById(\"delete\"),document.getElementById(\"send\"),document.getElementById(\"reservation-firstName\"),document.getElementById(\"reservation-name\"),document.getElementById(\"error-reservation\"),document.getElementById(\"signature\"),document.getElementById(\"form-reservation\"),document.getElementById(\"confirmation-message\"),document.getElementById(\"reservation-box-text\"),document.getElementById(\"reservation-box-timer\"),document.getElementById(\"reservation-box\"));t.play();for(let s=0;s<e.response.length;s++){let i=new r(e.response[s],document.getElementById(\"station-name\"),document.getElementById(\"station-address\"),document.getElementById(\"station-status\"),document.getElementById(\"velov-number\"));e.marker[s]=new google.maps.Marker({position:i.position,map:e.map,icon:{url:\"images/station.png\"}}),e.marker[s].addListener(\"click\",function(){\"\"!==t.errorReservationId.innerHTML&&(t.errorReservationId.innerHTML=\"\"),t.displayDivStationInfos(),e.displayInfoStation(i)})}}},t.open(\"GET\",\"https://api.jcdecaux.com/vls/v1/stations?contract=lyon&apiKey=43f89aec196d8dc961aef4bfbde0b6a681dff5df\"),t.send()}displayInfoStation(e){e.nameId.innerHTML=e.name.toLowerCase(),e.addressId.innerHTML=e.address.charAt(0).toUpperCase()+e.address.substring(1).toLowerCase(),\"OPEN\"==e.status?e.statusId.innerHTML=\"Ouverte\":\"CLOSED\"==e.status?e.statusId.innerHTML=\"Fermée\":e.statusId.innerHTML=e.status,e.velovNumberId.innerHTML=e.velovNumber}};var u=class{constructor(e){this.text=e}animation(){this.text.style.opacity=1,this.text.style.transition=\"opacity 3s\"}};var d=class{constructor(e,t,s,i,n,a,o,r,l){this.id=e,this.leftButton=t,this.rightButton=s,this.stopButton=i,this.stopButtonPlay=n,this.stopButtonPause=a,this.valueButtonActive=o,this.valueButtonDesactive=r,this.arrowLeft=!1,this.arrowRight=!1,this.time=l,this.image=1,this.autoPlay=window.setInterval(()=>{this.manualPlay,this.image<4?this.next():4==this.image&&this.goFirstImage()},this.time)}init(){this.manualPlay(this.leftButton),this.manualPlay(this.rightButton),this.manualPlay(this.stopButton)}changeImage(){this.id.style.background=\"url(images/image-\"+this.image+\".jpg)\"}previous(){this.image=this.image-1,this.changeImage()}next(){this.image=this.image+1,this.changeImage()}stop(){clearInterval(this.autoPlay),this.autoPlay=null}goFirstImage(){this.image=1,this.changeImage()}restart(){this.autoPlay=window.setInterval(()=>{this.manualPlay,this.image<4?this.next():this.goFirstImage()},this.time)}displayStopButton(){this.id.addEventListener(\"mouseover\",()=>{document.getElementById(\"slideshow-pausePlayButton\").classList.replace(\"mouseOut\",\"mouseOn\")}),this.id.addEventListener(\"mouseout\",()=>{document.getElementById(\"slideshow-pausePlayButton\").classList.replace(\"mouseOn\",\"mouseOut\")})}manualPlay(e){e.addEventListener(\"click\",()=>{e==this.leftButton?this.image>1&&(null!==this.autoPlay?(this.stop(),this.image=this.image-1,this.changeImage(),this.restart()):this.previous()):e==this.rightButton?this.image<4&&(null!==this.autoPlay?(this.stop(),this.next(),this.restart()):this.next()):e==this.stopButton&&(null!==this.autoPlay?(this.stop(),this.stopButtonPause.classList.replace(this.valueButtonActive,this.valueButtonDesactive),this.stopButtonPlay.classList.replace(this.valueButtonDesactive,this.valueButtonActive)):(this.restart(),this.stopButtonPause.classList.replace(this.valueButtonDesactive,this.valueButtonActive),this.stopButtonPlay.classList.replace(this.valueButtonActive,this.valueButtonDesactive)))}),document.addEventListener(\"keydown\",e=>{37===e.keyCode&&0==this.arrowLeft?(this.arrowLeft=!0,this.image>1&&(null!==this.autoPlay?(this.stop(),this.image=this.image-1,this.changeImage(),this.restart()):this.previous())):39===e.keyCode&&0==this.arrowRight&&(this.arrowRight=!0,this.image<4&&(null!==this.autoPlay?(this.stop(),this.next(),this.restart()):this.next())),document.addEventListener(\"keyup\",e=>{37!==e.keyCode&&39!==e.keyCode||(this.arrowLeft=!1,this.arrowRight=!1)})})}};var c=class{constructor(e,t,s,i){this.buttonMobileMenu=e,this.backgroundMobileMenu=t,this.buttonsMobilesMenu=s,this.contentMobileMenu=i}play(){this.displayContentMobileMenu(this.buttonMobileMenu),this.displayContentMobileMenu(this.backgroundMobileMenu),this.displayContentMobileMenu(this.buttonsMobilesMenu),this.listenSizeWindow()}displayContentMobileMenu(e){e.addEventListener(\"click\",()=>{this.contentMobileMenu.classList.contains(\"mobileMenu_disable\")?(this.contentMobileMenu.classList.replace(\"mobileMenu_disable\",\"mobileMenu_active\"),this.backgroundMobileMenu.classList.contains(\"mobileMenu-background_disable\")&&this.backgroundMobileMenu.classList.replace(\"mobileMenu-background_disable\",\"mobileMenu-background_active\")):this.contentMobileMenu.classList.contains(\"mobileMenu_active\")&&(this.contentMobileMenu.classList.replace(\"mobileMenu_active\",\"mobileMenu_disable\"),this.backgroundMobileMenu.classList.contains(\"mobileMenu-background_active\")&&this.backgroundMobileMenu.classList.replace(\"mobileMenu-background_active\",\"mobileMenu-background_disable\"))})}listenSizeWindow(){setInterval(()=>{window.innerWidth>900&&this.contentMobileMenu.classList.contains(\"mobileMenu_active\")&&(this.contentMobileMenu.classList.replace(\"mobileMenu_active\",\"mobileMenu_disable\"),this.backgroundMobileMenu.classList.contains(\"mobileMenu-background_active\")&&this.backgroundMobileMenu.classList.replace(\"mobileMenu-background_active\",\"mobileMenu-background_disable\"))},150)}};window.onload=function(){new i(document.getElementById(\"logo-loader\"),document.getElementById(\"loader\")).play(),new l(document.getElementById(\"api-google\"),45.75,4.85,15).play();let e=new d(document.getElementById(\"info-slideshow\"),document.getElementById(\"slideshow-leftButton\"),document.getElementById(\"slideshow-rightButton\"),document.getElementById(\"slideshow-pausePlayButton\"),document.getElementById(\"play\"),document.getElementById(\"pause\"),\"pausePlay_active\",\"pausePlay_desactive\",5e3);e.init(),e.displayStopButton(),new c(document.getElementById(\"header-mobileImg\"),document.getElementById(\"mobileMenu-background\"),document.getElementById(\"mobileMenu-buttonGroupe\"),document.getElementById(\"mobileMenu\")).play(),new u(document.getElementById(\"big-one-title\")).animation()}()}]);","extractedComments":[]}